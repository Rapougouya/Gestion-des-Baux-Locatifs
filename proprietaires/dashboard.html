<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tableau de Bord - Propri√©taire | PNSBIL</title>
    <link rel="stylesheet" href="../css/styles.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="../css/pages/proprietaires-dashboard.css">
</head>
<body class="dashboard-page">
    <header class="dashboard-header">
        <div class="header-content">
            <div class="logo">
                <span>üè† PNSBIL</span>
                <span>Espace Propri√©taire</span>
            </div>
            <div class="user-menu">
                <span class="user-name" id="userName">M. Mohamed Diallo</span>
                <button class="btn btn-outline" onclick="logout()">D√©connexion</button>
            </div>
        </div>
    </header>

    <nav class="sidebar">
        <div class="nav-section">
            <h3>Gestion Immobili√®re</h3>
            <a href="dashboard.html" class="nav-link active">üìä Tableau de bord</a>
            <a href="proprietes.html" class="nav-link">üè† Mes propri√©t√©s</a>
            <a href="baux.html" class="nav-link">üìë Baux locatifs</a>
            <a href="paiements.html" class="nav-link">üí≥ Paiements</a>
            <a href="impots.html" class="nav-link">üí∞ Imp√¥ts locatifs</a>
        </div>
        
        <div class="nav-section">
            <h3>Communication</h3>
            <a href="communication.html" class="nav-link">üí¨ Messagerie</a>
        </div>
    </nav>

    <main class="main-content">
        <div class="page-header">
            <h1>Tableau de Bord Propri√©taire</h1>
            <p>Bienvenue dans votre espace de gestion immobili√®re</p>
        </div>

        <div class="metrics-grid">
            <div class="metric-card">
                <div class="metric-icon">üè†</div>
                <div class="metric-info">
                    <h3>Propri√©t√©s</h3>
                    <div class="metric-value">8</div>
                    <div class="metric-change">+2 cette ann√©e</div>
                </div>
            </div>
    
            <div class="metric-card">
                <div class="metric-icon">üí∞</div>
                <div class="metric-info">
                    <h3>Revenus Mensuels</h3>
                    <div class="metric-value">2.5M FCFA</div>
                    <div class="metric-change positive">+12%</div>
                </div>
            </div>
    
            <div class="metric-card">
                <div class="metric-icon">üìë</div>
                <div class="metric-info">
                    <h3>Baux Actifs</h3>
                    <div class="metric-value">6</div>
                    <div class="metric-change">94% occupation</div>
                </div>
            </div>
    
            <div class="metric-card">
                <div class="metric-icon">‚ö†Ô∏è</div>
                <div class="metric-info">
                    <h3>En Attente</h3>
                    <div class="metric-value">3</div>
                    <div class="metric-change">Paiements retard</div>
                </div>
            </div>
        </div>

        <!-- Graphiques et statistiques -->
        <div class="dashboard-grid">
            <div class="chart-card">
                <h3>√âvolution des Revenus</h3>
                <div class="chart-container">
                    <canvas id="revenueChart"></canvas>
                </div>
            </div>

            <div class="stats-card">
                <h3>R√©partition par Type</h3>
                <div class="stats-container">
                    <div class="stat-item">
                        <span class="stat-label">Appartements</span>
                        <div class="stat-bar">
                            <div class="stat-fill" style="width: 45%"></div>
                        </div>
                        <span class="stat-value">45%</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Maisons</span>
                        <div class="stat-bar">
                            <div class="stat-fill" style="width: 25%"></div>
                        </div>
                        <span class="stat-value">25%</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Villas</span>
                        <div class="stat-bar">
                            <div class="stat-fill" style="width: 20%"></div>
                        </div>
                        <span class="stat-value">20%</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Commerces</span>
                        <div class="stat-bar">
                            <div class="stat-fill" style="width: 10%"></div>
                        </div>
                        <span class="stat-value">10%</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Derni√®res activit√©s -->
        <div class="recent-activities">
            <h2>Activit√©s R√©centes</h2>
            <div class="activities-list">
                <div class="activity-item">
                    <div class="activity-icon success">üí∞</div>
                    <div class="activity-content">
                        <p>Paiement re√ßu - Appartement B12</p>
                        <span class="activity-time">Il y a 2 heures</span>
                    </div>
                    <div class="activity-amount">450,000 FCFA</div>
                </div>
                <div class="activity-item">
                    <div class="activity-icon info">üìë</div>
                    <div class="activity-content">
                        <p>Nouveau bail sign√© - Villa 45</p>
                        <span class="activity-time">Hier</span>
                    </div>
                </div>
                <div class="activity-item">
                    <div class="activity-icon warning">‚ö†Ô∏è</div>
                    <div class="activity-content">
                        <p>Paiement en retard - Studio C5</p>
                        <span class="activity-time">Il y a 3 jours</span>
                    </div>
                </div>
                <div class="activity-item">
                    <div class="activity-icon primary">üîß</div>
                    <div class="activity-content">
                        <p>Demande maintenance - Appartement B12</p>
                        <span class="activity-time">Il y a 5 jours</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Actions rapides -->
        <div class="quick-actions">
            <h2>Actions Rapides</h2>
            <div class="actions-grid">
                <button class="action-btn" onclick="location.href='proprietes.html'">
                    <span class="action-icon">‚ûï</span>
                    <span>Ajouter une propri√©t√©</span>
                </button>
                <button class="action-btn" onclick="location.href='baux.html'">
                    <span class="action-icon">üìù</span>
                    <span>Nouveau bail</span>
                </button>
                <button class="action-btn" onclick="location.href='paiements.html'">
                    <span class="action-icon">üí≥</span>
                    <span>V√©rifier paiements</span>
                </button>
                <button class="action-btn" onclick="location.href='communication.html'">
                    <span class="action-icon">üí¨</span>
                    <span>Messagerie</span>
                </button>
            </div>
        </div>
    </main>

    <script src="../js/auth.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    
    <!-- Footer -->
    <footer class="bg-dark text-white pt-5 pb-3">
        <div class="container">
            <div class="row">
                <div class="col-lg-4 mb-4">
                    <h5 class="fw-bold mb-3">PNSBIL</h5>
                    <p>Plateforme Nationale de Suivi des Baux et Perception des Imp√¥ts Locatifs</p>
                    <p>Modernisation et digitalisation de la gestion du march√© locatif.</p>
                </div>
                <div class="col-lg-2 col-md-4 mb-4">
                    <h5 class="fw-bold mb-3">Liens rapides</h5>
                    <ul class="list-unstyled">
                        <li class="mb-2"><a href="index.html" class="text-white-50 text-decoration-none">Accueil</a></li>
                        <li class="mb-2"><a href="properties.html" class="text-white-50 text-decoration-none">Propri√©t√©s</a></li>
                        <li class="mb-2"><a href="leases.html" class="text-white-50 text-decoration-none">Baux</a></li>
                        <li class="mb-2"><a href="taxes.html" class="text-white-50 text-decoration-none">Imp√¥ts</a></li>
                    </ul>
                </div>
                <div class="col-lg-2 col-md-4 mb-4">
                    <h5 class="fw-bold mb-3">Ressources</h5>
                    <ul class="list-unstyled">
                        <li class="mb-2"><a href="#" class="text-white-50 text-decoration-none">FAQ</a></li>
                        <li class="mb-2"><a href="#" class="text-white-50 text-decoration-none">Guides</a></li>
                        <li class="mb-2"><a href="#" class="text-white-50 text-decoration-none">Contact</a></li>
                        <li class="mb-2"><a href="#" class="text-white-50 text-decoration-none">Mentions l√©gales</a></li>
                    </ul>
                </div>
                <div class="col-lg-4 col-md-4 mb-4">
                    <h5 class="fw-bold mb-3">Contact</h5>
                    <ul class="list-unstyled">
                        <li class="mb-2"><i class="fas fa-map-marker-alt me-2"></i> Avenue XXXXX, Ouagadougou, Burkina Faso</li>
                        <li class="mb-2"><i class="fas fa-phone me-2"></i> +226 33 123 45 67</li>
                        <li class="mb-2"><i class="fas fa-envelope me-2"></i> contact@pnsbil.sn</li>
                    </ul>
                </div>
            </div>
            <hr class="my-4">
            <div class="text-center">
                <p class="mb-0">&copy; 2025 PNSBIL - Tous droits r√©serv√©s</p>
            </div>
        </div>
    </footer>

    <script src="../js/dashboard-prop.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Script de d√©bogage pour les m√©triques
        document.addEventListener('DOMContentLoaded', function() {
            console.log('=== D√âBOGAGE M√âTRIQUES ===');
            
            // 1. V√©rifier si les √©l√©ments existent
            const metricsGrid = document.querySelector('.metrics-grid');
            const metricCards = document.querySelectorAll('.metric-card');
            
            console.log('Grille de m√©triques trouv√©e:', metricsGrid ? 'OUI' : 'NON');
            console.log('Nombre de cartes de m√©triques:', metricCards.length);
            
            if (metricsGrid) {
                console.log('Style display de .metrics-grid:', window.getComputedStyle(metricsGrid).display);
                console.log('Style visibility de .metrics-grid:', window.getComputedStyle(metricsGrid).visibility);
                console.log('Style opacity de .metrics-grid:', window.getComputedStyle(metricsGrid).opacity);
            }
            
            // 2. Afficher une alerte si les m√©triques ne sont pas visibles
            if (!metricsGrid || metricCards.length === 0) {
                alert('ERREUR: Les m√©triques ne sont pas trouv√©es dans le DOM');
            } else if (window.getComputedStyle(metricsGrid).display === 'none') {
                alert('ERREUR: .metrics-grid a display: none');
            }
            
            // 3. Ajouter une classe de d√©bogage
            document.body.classList.add('debug-mode');
            
            // 4. Forcer l'affichage en cas de probl√®me
            setTimeout(function() {
                if (metricsGrid && window.getComputedStyle(metricsGrid).display === 'none') {
                    console.log('Forcing display of metrics-grid...');
                    metricsGrid.style.display = 'grid';
                    metricsGrid.style.visibility = 'visible';
                    metricsGrid.style.opacity = '1';
                }
                
                // Afficher un message sur la page
                const debugDiv = document.createElement('div');
                debugDiv.style.cssText = `
                    position: fixed;
                    top: 100px;
                    right: 20px;
                    background: #DE0000;
                    color: white;
                    padding: 15px;
                    border-radius: 10px;
                    z-index: 9999;
                    font-weight: bold;
                    box-shadow: 0 4px 20px rgba(0,0,0,0.3);
                `;
                debugDiv.innerHTML = `M√©triques: ${metricCards.length} cartes d√©tect√©es`;
                document.body.appendChild(debugDiv);
                
                setTimeout(() => debugDiv.remove(), 3000);
            }, 1000);
        });
        </script>
</body>
</html>
